<!--
date: 2022-02-21T22:34:12+08:00
lastmod: 2022-02-21T22:34:12+08:00
-->
## 性能指标

### 响应时间

指某个请求从发出到最终响应消耗的时间。

在对响应时间进行测试时，通常采用重复请求的方式，然后计算平均响应时间。

### 吞吐量

指系统在单位时间内可以处理的请求数量，通常使用每秒响应请求数（QPS）来衡量。

### 并发用户数

指系统能同时处理的并发用户请求数量，可以通过多线程来处理并发请求，从而提高吞吐量以及缩短响应时间。使用多线程主要有两个原因：

1）多CPU，可以很好支持多线程并发处理。<br>
2）IO操作会长时间阻塞，借助IO多路复用等方式可以将IO操作的这段等待时间利用起来，使得CPU利用率大大提高。

并发用户数不是越高越好，如果并发用户数太高，系统来不及处理过多的请求，就会使大量请求需要等待，导致响应时间大大提高。

## 性能优化

### 集群

将多台服务器组成集群，使用负载均衡将请求转发到集群中，避免单一服务器的负载压力过大，导致性能降低。

### 缓存

缓存能够提高性能的原因如下：

1）缓存数据通常位于内存等介质中，对于读操作特别快；<br>
2）缓存数据可以位于靠近用户的地理位置上（比如CDN）；<br>
3）可以将计算结果进行缓存，避免重复计算。

### 异步

某些实时要求不高的业务可以抽离出来，借助消息队列来异步执行。

## 伸缩性

指不断向集群中添加服务器来缓解不断上升的用户并发访问压力和不断增长的数据存储需求，即水平扩展。（垂直扩展指提升单机处理能力：包括升级服务器配置，以及提升单机架构性能。）

应用服务器只要不具有状态，就可以很容易地通过负载均衡器向集群中添加新的服务器。

关系型数据库的伸缩性通过Sharding来实现，将数据按一定的规则分布到不同的节点上，从而解决单台存储服务器的存储空间限制。

对于非关系型数据库，它们天生就是为海量数据而诞生的，对伸缩性的支持特别好。

## 扩展性

指的是添加新功能时对现有系统的其它应用无影响，这就要求不同应用具备低耦合的特点。

实现可扩展主要有两种方式：

1）使用消息队列进行解耦，应用之间通过消息传递进行通信；<br>
2）使用分布式服务将业务和可复用的服务分离开来，业务使用分布式服务框架调用可复用的服务。新增的产品可以通过调用可复用的服务来实现业务逻辑，对其它产品没有影响。

## 可用性

指系统在某个考察时间内可以正常运行的概率，实现高可用有以下手段：

### 冗余

保证高可用的主要手段是使用冗余，当某个服务器故障时就请求其它服务器。

应用服务器的冗余比较容易实现，只要保证应用服务器不具有状态，那么某个应用服务器故障时，负载均衡器将该应用服务器原先的用户请求转发到另一个应用服务器上，不会对用户有任何影响。

存储服务器的冗余需要使用主从复制来实现，当主服务器故障时，需要提升从服务器为主服务器，这个过程称为切换。

### 监控

对 CPU、内存、磁盘、网络等系统负载信息进行监控，当某个信息达到一定阈值时通知运维人员，从而在系统发生故障之前及时发现问题。

### 服务降级

服务降级是系统为了应对大量的请求，主动关闭部分功能，从而保证核心功能可用。

## 安全性

要求系统在应对各种攻击手段时能够有可靠的应对措施。

## 参考链接

* [系统设计基础](http://www.cyc2018.xyz/%E5%85%B6%E5%AE%83/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80.html)
