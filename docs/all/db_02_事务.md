<!--
date: 2022-02-19T22:34:12+08:00
lastmod: 2022-02-19T22:34:12+08:00
-->
## 事务（Transaction）

事务指满足ACID特性的一组操作，通过`Commit`提交一个事务，也可以通过`Rollback`回滚一个事务。

事务的四大特性（ACID）如下：

## 原子性（Atomicity）

事务被视为不可分割的最小单元，事务中的所有操作要么全部执行成功，要么全部执行失败。

回滚可以用回滚日志（Undo Log）来实现，回滚日志记录着事务所执行的修改操作，在回滚时反向执行这些修改操作即可。

## 一致性（Consistency）

数据库在事务执行前后都保持一致性状态。在一致性状态下，所有事务对同一个数据的读取结果都是相同的。

## 隔离性（Isolation）

一个事务所做的修改在最终提交以前，对其它事务是不可见的。在并发情况下，不同事务之间互不干扰。

## 持久性（Durability）

一旦事务提交成功，事务所做的修改都必须持久化到数据库中。即使系统发生崩溃，事务执行的结果也不能丢失。

系统发生崩溃可以用重做日志（Redo Log）进行恢复，从而实现持久性。与回滚日志记录数据的逻辑修改不同，重做日志记录的是数据页的物理修改。

## AUTOCOMMIT

MySQL默认采用自动提交模式。也就是说，如果不显式使用`START TRANSACTION;`语句来开始一个事务，那么每个查询操作都会被当做一个事务并自动提交。（在PostgreSQL中使用`BEGIN;`或`BEGIN TRANSACTION;`来开启一个事务；Oracle的事务自动开始于一个DML语句。）

## 并发一致性问题

在并发环境下，事务的隔离性很难保证，因此会出现并发一致性问题。

## 参考链接

* [数据库系统原理](http://www.cyc2018.xyz/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.html#一、事务)